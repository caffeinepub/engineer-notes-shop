{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 37,
  "summary": "App to sell the user's engineering books and notes via a simple storefront with upload/listing, pricing, and purchasing.",
  "architectural_notes": [
    "Admin role assignment decision: automatically grant admin to the first authenticated user who accesses /admin (no token inputs), so subsequent admin checks/product queries succeed for that principal."
  ],
  "known_issues": [
    "Deployment failed during packaging/push to the network; user requested a retry.",
    "Admin/Product upload button is not available in the UI; needs to be enabled so the owner can upload product files.",
    "Admin/Product upload button still not available in the UI after the attempted deployment/build; fix not taking effect (possible build/deploy mismatch or UI condition/role gating issue).",
    "After a successful build (Draft Version 8), the Admin/Product upload button is still not available; issue persists across builds.",
    "After production deployment (Version 9), the Admin/Product upload button is still not visible; issue persists.",
    "After Draft Version 10 deployment, the Admin/Product Upload button is still not visible; issue persists.",
    "After Draft Version 11 deployment, the Admin/Product Upload button is still not visible; issue persists.",
    "After Draft Version 12 build, the Admin/Product Upload button is still not visible/available; issue persists.",
    "UI runtime error: \"Menu item must be used within 'menu'\" (MenuItem used outside of Menu component/context).",
    "After Draft Version 14 deployment, the menu is visible but the Admin/Product Upload button is still not available/visible; issue persists."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-create-a-public-storefront-ui-that-lists-all-published-products-with-search-and-basic-filters-e-g-type-book-note-and-a-product-detail-page-with-description-price-and-a-clear-purchase-action",
      "title": "Create a public storefront UI that lists all published products with search and basic filters (e.g., type: book/note), and a product detail page with description, price, and a clear purchase action.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-add-authentication-in-the-ui-using-internet-identity-showing-different-navigation-actions-for-a-public-visitors-b-signed-in-buyers-purchases-downloads-and-c-owner-admin-manage-products",
      "title": "Add authentication in the UI using Internet Identity, showing different navigation/actions for: (a) public visitors, (b) signed-in buyers (purchases/downloads), and (c) owner/admin (manage products).",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-create-an-admin-dashboard-ui-for-the-owner-to-manage-products-create-product-edit-fields-title-description-type-price-currency-publish-unpublish-delete-and-upload-replace-the-associated-file",
      "title": "Create an admin dashboard UI for the owner to manage products: create product, edit fields (title/description/type/price/currency), publish/unpublish, delete, and upload/replace the associated file.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-buyer-library-ui-for-signed-in-users-that-lists-purchased-products-and-provides-a-download-button-for-each-purchased-item",
      "title": "Create a buyer library UI for signed-in users that lists purchased products and provides a download button for each purchased item.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-use-react-query-for-all-backend-calls-products-purchases-entitlements-with-loading-error-states-and-optimistic-or-refetch-behavior-where-appropriate-after-mutations-create-update-publish-purchase-upload",
      "title": "Use React Query for all backend calls (products, purchases, entitlements) with loading/error states and optimistic or refetch behavior where appropriate after mutations (create/update/publish/purchase/upload).",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-a-coherent-visual-theme-for-the-app-colors-typography-spacing-and-components-with-a-clean-technical-editorial-style-suitable-for-engineering-materials-enforce-the-theme-consistently-across-storefront-product-pages-admin-dashboard-and-buyer-library",
      "title": "Apply a coherent visual theme for the app (colors, typography, spacing, and components) with a clean, technical editorial style suitable for engineering materials; enforce the theme consistently across storefront, product pages, admin dashboard, and buyer library.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-generate-and-include-static-marketing-brand-images-for-the-storefront-logo-and-a-hero-banner-illustration-and-render-them-from-frontend-static-assets",
      "title": "Generate and include static marketing/brand images for the storefront (logo and a hero/banner illustration) and render them from frontend static assets.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-clear-in-app-way-for-the-user-to-specify-what-they-want-to-update-by-adding-a-simple-request-an-update-action-in-the-ui-e-g-in-the-footer-or-header-that-opens-a-modal-with-a-freeform-text-field-and-a-copy-to-clipboard-button-so-the-user-can-share-exact-update-instructions",
      "title": "Add a clear in-app way for the user to specify what they want to update by adding a simple \"Request an update\" action in the UI (e.g., in the footer or header) that opens a modal with a freeform text field and a \"Copy to clipboard\" button so the user can share exact update instructions.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-data-hooks-and-pages-so-that-the-admin-dashboard-lists-all-products-including-drafts-for-management-and-file-uploads-while-the-public-storefront-continues-to-show-only-published-products",
      "title": "Update the frontend data hooks and pages so that the Admin Dashboard lists all products (including drafts) for management and file uploads, while the public Storefront continues to show only published products.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-buyer-library-ui-to-list-only-products-the-signed-in-user-has-purchased-and-ensure-each-listed-item-s-download-action-successfully-downloads-the-associated-uploaded-product-file-or-shows-a-clear-error-if-no-file-is-available",
      "title": "Update the Buyer Library UI to list only products the signed-in user has purchased, and ensure each listed item’s download action successfully downloads the associated uploaded product file (or shows a clear error if no file is available).",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-admin-dashboard-ui-to-include-a-clear-prominent-getting-started-set-of-action-buttons-that-guides-the-owner-through-the-sequence-create-product-upload-pdf-set-price-publish-using-explicit-button-labels-not-icon-only-controls-and-short-helper-text",
      "title": "Update the Admin Dashboard UI to include a clear, prominent “Getting started” set of action buttons that guides the owner through the sequence: Create Product → Upload PDF → Set Price → Publish, using explicit button labels (not icon-only controls) and short helper text.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-the-per-product-action-controls-on-the-admin-dashboard-so-the-owner-can-clearly-see-and-execute-the-key-actions-for-selling-upload-pdf-edit-including-price-and-publish-unpublish-with-consistent-button-labeling-and-visibility",
      "title": "Improve the per-product action controls on the Admin Dashboard so the owner can clearly see and execute the key actions for selling: Upload PDF, Edit (including price), and Publish/Unpublish, with consistent button labeling and visibility.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-admin-only-call-to-action-on-the-public-storefront-page-that-clearly-directs-the-owner-to-the-admin-dashboard-for-uploading-and-publishing-products",
      "title": "Add an admin-only call-to-action on the public storefront page that clearly directs the owner to the Admin Dashboard for uploading and publishing products.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-retry-the-packaging-build-and-deployment-to-the-internet-computer-network-for-the-current-project-revision",
      "title": "Retry the packaging/build and deployment to the Internet Computer network for the current project revision.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-if-the-retry-deployment-fails-again-capture-and-surface-the-full-deployment-error-output-including-the-failing-step-and-the-underlying-error-message-in-a-way-that-a-developer-can-act-on-and-propose-the-minimal-code-config-change-needed-to-make-the-next-deployment-succeed",
      "title": "If the retry deployment fails again, capture and surface the full deployment error output (including the failing step and the underlying error message) in a way that a developer can act on, and propose the minimal code/config change needed to make the next deployment succeed.",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-admin-dashboard-product-file-upload-control-so-that-an-admin-always-has-an-available-clickable-upload-or-upload-pdf-button-for-each-product-and-selecting-a-pdf-reliably-triggers-the-upload-flow",
      "title": "Fix the Admin Dashboard product file upload control so that an admin always has an available, clickable \"Upload\" (or \"Upload PDF\") button for each product, and selecting a PDF reliably triggers the upload flow.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-admin-dashboard-always-renders-a-visible-clickable-upload-pdf-button-for-every-product-card-regardless-of-product-status-draft-published-and-whether-a-file-is-already-uploaded-and-ensure-it-is-only-disabled-during-an-active-upload-for-that-specific-product",
      "title": "Ensure the Admin Dashboard always renders a visible, clickable \"Upload PDF\" button for every product card, regardless of product status (draft/published) and whether a file is already uploaded, and ensure it is only disabled during an active upload for that specific product.",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-add-explicit-user-facing-diagnostics-on-the-admin-dashboard-when-the-upload-action-is-not-usable-due-to-authorization-or-data-loading-errors-e-g-admin-check-fails-admin-product-list-fails-so-the-user-understands-why-they-cannot-upload-and-what-to-do-next",
      "title": "Add explicit, user-facing diagnostics on the Admin Dashboard when the upload action is not usable due to authorization or data-loading errors (e.g., admin check fails, admin product list fails), so the user understands why they cannot upload and what to do next.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-verify-the-upload-control-wiring-end-to-end-from-ui-interaction-to-backend-call-selecting-a-pdf-from-the-upload-pdf-button-must-trigger-the-upload-mutation-and-show-progress-and-on-success-the-product-s-file-status-must-update-to-uploaded-without-requiring-a-hard-refresh",
      "title": "Verify the upload control wiring end-to-end from UI interaction to backend call: selecting a PDF from the \"Upload PDF\" button must trigger the upload mutation and show progress, and on success the product’s file status must update to \"Uploaded\" without requiring a hard refresh.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-on-the-admin-dashboard-page-add-explicit-error-and-diagnostic-ui-for-the-admin-check-and-admin-product-list-queries-so-that-when-the-upload-pdf-button-is-not-available-the-page-explains-whether-the-user-is-a-not-signed-in-b-signed-in-but-not-an-admin-or-c-blocked-due-to-a-loading-query-error",
      "title": "On the Admin Dashboard page, add explicit error and diagnostic UI for the admin check and admin product list queries so that when the Upload PDF button is not available, the page explains whether the user is (a) not signed in, (b) signed in but not an admin, or (c) blocked due to a loading/query error.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-admin-dashboard-renders-a-visible-clickable-upload-pdf-button-for-each-product-card-whenever-the-admin-product-list-is-successfully-loaded-and-the-caller-is-an-admin-and-ensure-it-is-not-inadvertently-hidden-disabled-due-to-unrelated-page-level-loading-states",
      "title": "Ensure the Admin Dashboard renders a visible, clickable \"Upload PDF\" button for each product card whenever the admin product list is successfully loaded and the caller is an admin, and ensure it is not inadvertently hidden/disabled due to unrelated page-level loading states.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-in-the-global-header-navigation-make-the-admin-navigation-path-discoverable-even-when-the-admin-status-is-still-loading-or-cannot-be-determined-by-showing-an-admin-entry-that-either-navigates-to-admin-or-clearly-indicates-why-it-is-unavailable-loading-not-authorized",
      "title": "In the global header navigation, make the Admin navigation path discoverable even when the admin status is still loading or cannot be determined, by showing an Admin entry that either navigates to /admin or clearly indicates why it is unavailable (loading / not authorized).",
      "reqIds": [
        "REQ-27"
      ],
      "version": 1
    },
    {
      "id": "feature-make-it-impossible-for-the-admin-dashboard-to-reach-a-state-where-the-user-is-an-admin-with-a-successfully-loaded-admin-product-list-but-the-per-product-upload-pdf-control-is-not-visible-if-the-upload-pdf-control-cannot-be-rendered-for-any-reason-render-an-explicit-user-visible-inline-error-in-its-place-on-that-product-card-explaining-why",
      "title": "Make it impossible for the Admin Dashboard to reach a state where the user is an admin with a successfully loaded admin product list but the per-product \"Upload PDF\" control is not visible. If the Upload PDF control cannot be rendered for any reason, render an explicit, user-visible inline error in its place on that product card explaining why.",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-always-visible-admin-diagnostics-section-at-the-top-of-the-admin-dashboard-that-helps-explain-why-the-upload-pdf-button-might-not-be-visible-including-authentication-status-caller-principal-as-text-admin-check-status-result-admin-products-query-status-result-count-and-any-error-messages-from-those-queries",
      "title": "Add an always-visible \"Admin Diagnostics\" section at the top of the Admin Dashboard that helps explain why the Upload PDF button might not be visible, including: authentication status, caller principal (as text), admin check status/result, admin products query status/result count, and any error messages from those queries.",
      "reqIds": [
        "REQ-29"
      ],
      "version": 1
    },
    {
      "id": "feature-add-stable-test-selectors-to-the-upload-pdf-control-and-its-container-so-it-can-be-reliably-verified-in-future-builds-e-g-data-testid-on-the-per-product-upload-button-and-on-the-per-product-action-area",
      "title": "Add stable test selectors to the Upload PDF control and its container so it can be reliably verified in future builds (e.g., data-testid on the per-product upload button and on the per-product action area).",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-on-the-admin-dashboard-ensure-that-when-the-user-is-authenticated-confirmed-admin-and-the-admin-product-list-query-has-successfully-loaded-each-product-card-renders-a-visible-upload-pdf-button-using-the-existing-upload-control-and-never-silently-omits-the-upload-action-area",
      "title": "On the Admin Dashboard, ensure that when the user is authenticated, confirmed admin, and the admin product list query has successfully loaded, each product card renders a visible \"Upload PDF\" button (using the existing upload control) and never silently omits the upload action area.",
      "reqIds": [
        "REQ-33"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-admin-diagnostics-section-sufficient-to-debug-upload-pdf-not-visible-reports-by-surfacing-the-exact-gating-state-currently-preventing-upload-controls-from-appearing-authentication-admin-check-result-admin-products-query-status-result-and-ensure-this-section-is-visible-on-all-admin-dashboard-states-signed-out-loading-error-not-admin-and-fully-loaded",
      "title": "Make the Admin Diagnostics section sufficient to debug \"Upload PDF not visible\" reports by surfacing the exact gating state currently preventing upload controls from appearing (authentication, admin check result, admin products query status/result), and ensure this section is visible on all Admin Dashboard states (signed out, loading, error, not admin, and fully loaded).",
      "reqIds": [
        "REQ-34"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-admin-dashboard-so-the-per-product-upload-pdf-action-is-available-and-usable-for-the-store-owner-admin-i-e-the-upload-pdf-button-is-visible-clickable-and-triggers-the-upload-flow-on-every-product-card-whenever-the-user-is-authenticated-confirmed-admin-and-the-admin-product-list-has-successfully-loaded",
      "title": "Fix the Admin Dashboard so the per-product \"Upload PDF\" action is available and usable for the store owner/admin (i.e., the Upload PDF button is visible, clickable, and triggers the upload flow) on every product card whenever the user is authenticated, confirmed admin, and the admin product list has successfully loaded.",
      "reqIds": [
        "REQ-35"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-top-level-main-menu-in-the-global-header-that-includes-1-a-categories-entry-for-browsing-book-categories-2-a-clearly-labeled-authentication-entry-sign-in-sign-out-using-the-existing-internet-identity-flow-and-3-links-to-informational-pages-about-us-and-contact-us",
      "title": "Add a top-level main menu in the global header that includes: (1) a Categories entry for browsing book categories, (2) a clearly labeled authentication entry (Sign in/Sign out) using the existing Internet Identity flow, and (3) links to informational pages: About Us and Contact Us.",
      "reqIds": [
        "REQ-36"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-categories-browsing-end-to-end-so-that-selecting-a-category-in-the-main-menu-navigates-to-a-category-view-and-the-storefront-list-is-filtered-accordingly",
      "title": "Implement Categories browsing end-to-end so that selecting a category in the main menu navigates to a category view and the storefront list is filtered accordingly.",
      "reqIds": [
        "REQ-37"
      ],
      "version": 1
    },
    {
      "id": "feature-add-informational-pages-for-about-us-and-contact-us-and-route-them-from-the-main-menu-using-english-user-facing-text",
      "title": "Add informational pages for \"About Us\" and \"Contact Us\" and route them from the main menu, using English user-facing text.",
      "reqIds": [
        "REQ-38"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-global-header-navigation-storefront-categories-about-us-contact-us-my-library-admin-and-sign-in-sign-out-accessible-on-small-screens-mobile-rather-than-being-hidden-behind-sm-md-breakpoints-by-adding-a-mobile-friendly-menu-that-provides-equivalent-navigation-options",
      "title": "Make the global header navigation (Storefront, Categories, About Us, Contact Us, My Library, Admin, and Sign in/Sign out) accessible on small screens (mobile), rather than being hidden behind sm/md breakpoints, by adding a mobile-friendly menu that provides equivalent navigation options.",
      "reqIds": [
        "REQ-40"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-clear-always-visible-troubleshooting-hint-on-the-admin-dashboard-for-cases-where-the-user-expects-uploads-to-be-available-but-they-are-blocked-by-authorization-not-admin-or-data-loading-errors-explicitly-directing-the-user-to-check-the-on-page-admin-diagnostics-and-showing-what-state-is-preventing-uploads",
      "title": "Add a clear, always-visible troubleshooting hint on the Admin Dashboard for cases where the user expects uploads to be available but they are blocked by authorization (not admin) or data loading errors, explicitly directing the user to check the on-page Admin Diagnostics and showing what state is preventing uploads.",
      "reqIds": [
        "REQ-41"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-runtime-error-menu-item-must-be-used-within-menu-by-removing-or-replacing-any-usage-of-dropdownmenu-menu-item-components-that-are-rendered-outside-of-a-dropdownmenu-context-in-the-mobile-navigation-sheet-in-frontend-src-components-brandheader-tsx",
      "title": "Fix the runtime error \"Menu item must be used within 'menu'\" by removing or replacing any usage of DropdownMenu* menu-item components that are rendered outside of a DropdownMenu context in the mobile navigation (Sheet) in `frontend/src/components/BrandHeader.tsx`.",
      "reqIds": [
        "REQ-42"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-admin-dashboard-reliably-displays-a-visible-clickable-upload-pdf-button-for-every-product-card-whenever-the-user-is-authenticated-confirmed-as-admin-and-the-admin-product-list-has-successfully-loaded-the-upload-button-must-not-be-hidden-due-to-unrelated-ui-state-including-any-header-menu-errors",
      "title": "Ensure the Admin Dashboard reliably displays a visible, clickable \"Upload PDF\" button for every product card whenever the user is authenticated, confirmed as admin, and the admin product list has successfully loaded; the upload button must not be hidden due to unrelated UI state (including any header/menu errors).",
      "reqIds": [
        "REQ-43"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-admin-dashboard-ui-so-the-per-product-upload-pdf-action-is-visible-and-enabled-whenever-1-the-user-is-authenticated-2-the-user-is-confirmed-admin-and-3-the-admin-product-list-has-successfully-loaded-if-the-upload-control-cannot-be-shown-for-any-reason-render-an-explicit-inline-error-in-its-place-english-text-on-that-product-card",
      "title": "Update the Admin Dashboard UI so the per-product \"Upload PDF\" action is visible and enabled whenever: (1) the user is authenticated, (2) the user is confirmed admin, and (3) the admin product list has successfully loaded; if the upload control cannot be shown for any reason, render an explicit inline error in its place (English text) on that product card.",
      "reqIds": [
        "REQ-47"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-admin-diagnostics-section-on-the-admin-dashboard-is-sufficient-to-debug-upload-pdf-not-available-reports-by-including-the-backend-admin-gating-diagnostic-data-including-whether-admin-is-initialized-configured-and-ensure-all-user-facing-diagnostics-and-troubleshooting-text-remain-in-english",
      "title": "Ensure the Admin Diagnostics section on the Admin Dashboard is sufficient to debug \"Upload PDF not available\" reports by including the backend admin-gating diagnostic data (including whether admin is initialized/configured), and ensure all user-facing diagnostics and troubleshooting text remain in English.",
      "reqIds": [
        "REQ-48"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-first-time-admin-system-initialization-flow-in-the-admin-dashboard-so-the-store-owner-can-initialize-the-admin-system-from-the-ui-when-the-backend-reports-it-is-not-initialized",
      "title": "Add a first-time Admin System initialization flow in the Admin Dashboard so the store owner can initialize the admin system from the UI when the backend reports it is not initialized.",
      "reqIds": [
        "REQ-49"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-react-query-mutation-hook-for-initializing-the-admin-system-and-wire-it-into-the-admin-dashboard-initialization-ui",
      "title": "Add a React Query mutation hook for initializing the admin system and wire it into the Admin Dashboard initialization UI.",
      "reqIds": [
        "REQ-50"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-admin-dashboard-initialization-ui-admin-to-remove-the-admin-token-and-user-token-input-fields-and-replace-them-with-a-tokenless-initialization-call-to-action-that-initializes-the-admin-system-for-the-currently-signed-in-user",
      "title": "Update the Admin Dashboard initialization UI (/admin) to remove the Admin Token and User Token input fields and replace them with a tokenless initialization call-to-action that initializes the admin system for the currently signed-in user.",
      "reqIds": [
        "REQ-53"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-react-query-admin-initialization-mutation-hook-to-call-the-backend-s-new-tokenless-admin-initialization-method-and-ensure-all-relevant-admin-queries-are-invalidated-refetched-after-initialization-succeeds",
      "title": "Update the React Query admin initialization mutation hook to call the backend’s new tokenless admin initialization method, and ensure all relevant admin queries are invalidated/refetched after initialization succeeds.",
      "reqIds": [
        "REQ-54"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-frontend-claim-store-owner-access-tokenless-call-to-action-on-admin-that-is-shown-when-the-user-is-signed-in-the-admin-system-is-initialized-the-user-is-not-currently-an-admin-and-backend-diagnostics-indicate-the-admin-role-is-claimable-e-g-no-admins-exist",
      "title": "Add a frontend \"Claim Store Owner Access\" (tokenless) call-to-action on /admin that is shown when the user is signed in, the admin system is initialized, the user is not currently an admin, and backend diagnostics indicate the admin role is claimable (e.g., no admins exist).",
      "reqIds": [
        "REQ-58"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-react-query-layer-to-support-the-new-tokenless-claim-owner-admin-flow-and-ensure-all-relevant-queries-are-invalidated-refetched-after-success-admin-check-admin-products-and-any-admin-diagnostics-initialization-queries-used-by-admin",
      "title": "Update the React Query layer to support the new tokenless claim-owner/admin flow and ensure all relevant queries are invalidated/refetched after success (admin check, admin products, and any admin diagnostics / initialization queries used by /admin).",
      "reqIds": [
        "REQ-59"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Build a storefront app to upload engineering books/notes, set prices, and allow visitors to purchase/download.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Implement backend data models and APIs to manage digital products (engineering books and notes), including: create/update/delete product, list products for storefront, get product details, and store pricing and publication status (draft/published).",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Add backend support for uploading and downloading the actual digital files for each product (e.g., PDF), and restrict file access so only the owner (admin) can upload/replace files, while buyers can download only after purchase entitlement is granted.",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Implement backend purchase flow and entitlements: allow an authenticated user to create a purchase record for a product at the current price, and grant that user an entitlement that unlocks the download for that product.",
      "reqIds": [
        "REQ-3"
      ],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Implement an owner/admin role based on a single configured owner principal (the canister controller/installer by default) to control product management actions (create/update/delete/publish and file upload).",
      "reqIds": [
        "REQ-4"
      ],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Add backend APIs to support (a) an admin-only product list that includes draft/unpublished products, and (b) an authenticated user’s purchased product IDs (or purchased products list) so the frontend can show a correct buyer library.",
      "reqIds": [
        "REQ-13"
      ],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Add clearer, more prominent UI buttons to guide the owner through uploading notes and selling them (e.g., Admin Dashboard: Create Product, Upload File, Set Price, Publish; plus clearer navigation to Storefront/Library).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Ensure the backend admin determination is correctly configured so the store owner can be recognized as admin in production (so the Admin Dashboard and upload functionality can be used). If the canister controller/installer is intended to be admin by default, ensure `isCallerAdmin()` returns true for that principal and admin-restricted methods (create/update/delete/publish/upload/getProducts) succeed for that principal.",
      "reqIds": [
        "REQ-30"
      ],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Ensure the backend reliably recognizes the store owner as an admin in production so that admin-gated methods (including product listing and file upload) succeed for the owner principal.",
      "reqIds": [
        "REQ-32"
      ],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Create a main menu/navigation with book categories, user login entry, and informational pages (About Us, Contact Us).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Ensure the store owner is reliably recognized as an admin in production so that admin-gated backend methods succeed (including isCallerAdmin(), getProducts(), create/update/delete/publish, and uploadProductFile()).",
      "reqIds": [
        "REQ-39"
      ],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Verify and, if needed, fix backend admin recognition so the store owner is detected as admin in production and admin-gated methods required by the Admin Dashboard (at minimum `isCallerAdmin()`, `getProducts()`, and `uploadProductFile()`) succeed for the owner principal.",
      "reqIds": [
        "REQ-44"
      ],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Fix backend admin recognition so the store owner is reliably detected as an admin in production and after upgrades, and so admin-gated methods used by the Admin Dashboard (at minimum: isCallerAdmin(), getProducts(), uploadProductFile()) succeed for the owner principal.",
      "reqIds": [
        "REQ-45"
      ],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Add explicit backend-readable diagnostics for admin gating so the frontend can distinguish between (a) signed out, (b) signed in but not admin, and (c) admin system not initialized / lost state after upgrade (if applicable), using English user-facing text for any surfaced errors.",
      "reqIds": [
        "REQ-46"
      ],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Persist the backend admin initialization status across upgrades so the canister does not revert to \"Admin system not initialized\" after deployment/upgrade.",
      "reqIds": [
        "REQ-51"
      ],
      "status": "pending"
    },
    {
      "id": "AR-22",
      "summary": "Remove the Admin Token/User Token requirement for initializing the admin system; instead automatically recognize/set the store owner (e.g., canister controller/installer principal) as admin so /admin works without manual token setup.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Update the backend admin initialization flow so the Admin Dashboard no longer requires an Admin Token and User Token to initialize the admin system; initialization must be possible without any user-provided secret tokens and must establish the signed-in initializer (the caller principal) as the initial admin.",
      "reqIds": [
        "REQ-52"
      ],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Update backend admin initialization/assignment so the first authenticated user who opens /admin (or performs initialization) is automatically granted admin rights (no tokens), ensuring Admin Check returns admin and admin product queries work.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Update the backend admin system so that if the admin system is initialized but there are no admins configured (or the admin list is otherwise empty), the first authenticated caller can become the store owner/admin without providing any tokens.",
      "reqIds": [
        "REQ-55"
      ],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Persist admin-system state across upgrades so the app does not lose (a) whether the admin system is initialized and (b) the configured admin principal(s), while preserving existing categories/products/purchases/user profiles data.",
      "reqIds": [
        "REQ-56"
      ],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Expose backend-readable admin-gating diagnostics sufficient for the frontend Admin Diagnostics panel to distinguish: (a) signed out, (b) signed in but not admin, (c) admin system not initialized, and (d) initialized but no admin configured / claimable state; ensure any surfaced error strings remain in English.",
      "reqIds": [
        "REQ-57"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Engineer Notes Shop",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}